# 🚇 서울 지하철 혼잡도 대시보드 구현 계획서

## 📋 프로젝트 개요

### 목적
서울교통공사 지하철 혼잡도 데이터를 활용하여 사용자가 효율적으로 지하철을 이용할 수 있도록 시각화 대시보드를 제공

### 기술 스택
- **프레임워크**: Streamlit
- **데이터 처리**: Pandas, NumPy
- **시각화**: Plotly, Matplotlib
- **배포**: Streamlit Cloud

### 데이터 소스
- 파일명: `서울교통공사_지하철혼잡도정보_20250930.csv`
- 데이터 항목: 호선, 역명, 상행/하행, 평일/휴일, 시간대별 혼잡도

---

## 🎯 주요 기능

### 1. 대시보드 홈
- 전체 혼잡도 통계 요약
- 호선별 평균 혼잡도
- 시간대별 전체 혼잡도 트렌드
- TOP 10 혼잡한 역/여유로운 역

### 2. 역별 상세 분석
- 특정 역 선택 및 상세 정보 표시
- 시간대별 혼잡도 그래프
- 상행/하행 비교
- 평일/휴일 패턴 비교
- 히트맵 시각화

### 3. 시간대별 분석
- 특정 시간대의 전체 노선 혼잡도
- 시간대 간 비교
- 피크 시간대 하이라이트

### 4. 맞춤 추천
- 출발지-도착지 기반 최적 시간 추천
- 혼잡 회피 시간대 제안
- 인사이트 및 팁 제공

---

## 📂 프로젝트 구조

```
multicampus_yeji/
├── app.py                              # 메인 Streamlit 앱 (홈페이지)
├── data/
│   ├── raw/
│   │   └── 서울교통공사_지하철혼잡도정보_20250930.csv
│   └── processed/
│       └── subway_congestion.pkl       # 전처리된 데이터
├── utils/
│   ├── __init__.py
│   ├── data_loader.py                  # 데이터 로딩 및 캐싱
│   ├── data_processor.py               # 데이터 처리 및 분석
│   └── visualization.py                # 차트 생성 함수
├── pages/
│   ├── 1_📊_대시보드.py
│   ├── 2_🔍_역별_분석.py
│   ├── 3_📈_시간대_분석.py
│   └── 4_💡_추천.py
├── .streamlit/
│   └── config.toml                     # Streamlit 설정
├── requirements.txt
├── README.md
└── 프로젝트_구현_계획서.md
```

---

## 🚀 Phase별 구현 계획

## **Phase 1: 환경 설정 및 데이터 준비** ✅ (완료)

### 목표
Streamlit 환경 구축 및 데이터 전처리

### 작업 내용

#### 1.1 프로젝트 초기화
```bash
# 가상환경 생성
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 필수 라이브러리 설치
pip install streamlit pandas plotly numpy openpyxl
pip freeze > requirements.txt
```

#### 1.2 데이터 전처리
**파일: `utils/data_loader.py`**

주요 작업:
- CSV 파일 인코딩 확인 및 수정 (현재 UTF-8 BOM 또는 CP949로 보임)
- 컬럼명 정리 및 표준화
- 시간대 데이터 형식 변환 (문자열 → 숫자)
- 결측치 처리
- 데이터 타입 최적화
- 피클 파일로 캐싱

```python
@st.cache_data
def load_data():
    # CSV 로딩 및 전처리
    df = pd.read_csv('data/raw/서울교통공사_지하철혼잡도정보_20250930.csv', encoding='cp949')
    # 처리 로직...
    return df
```

#### 1.3 데이터 구조 파악
- 호선 목록: 1호선~8호선
- 역 개수: 약 200개
- 시간대: 5:30 ~ 24:30 (30분 단위, 총 39개 구간)
- 방향: 상행, 하행
- 요일: 평일, 휴일

### 산출물
- ✅ `utils/data_loader.py`
- ✅ `utils/data_processor.py`
- ✅ `data/processed/subway_congestion.pkl`
- ✅ `requirements.txt`

---

## **Phase 2: 메인 대시보드 (홈)** ✅ (완료)

### 목표
전체 개요를 보여주는 메인 페이지 구현

### 작업 내용

#### 2.1 레이아웃 구성
**파일: `app.py`**

```python
import streamlit as st

st.set_page_config(
    page_title="서울 지하철 혼잡도 대시보드",
    page_icon="🚇",
    layout="wide",
    initial_sidebar_state="expanded"
)

st.title("🚇 서울 지하철 혼잡도 대시보드")
st.markdown("실시간 지하철 혼잡도를 확인하고 최적의 이동 시간을 찾아보세요!")
```

#### 2.2 주요 메트릭 표시
```python
col1, col2, col3, col4 = st.columns(4)

with col1:
    st.metric(
        label="전체 평균 혼잡도",
        value="45.2%",
        delta="+2.3%"
    )

with col2:
    st.metric(
        label="가장 혼잡한 시간",
        value="오전 8:00"
    )

with col3:
    st.metric(
        label="가장 혼잡한 노선",
        value="2호선"
    )

with col4:
    st.metric(
        label="분석 역 수",
        value="200개"
    )
```

#### 2.3 주요 차트
- **호선별 평균 혼잡도** (막대 차트)
- **시간대별 전체 혼잡도** (선 차트)
- **평일 vs 휴일 비교** (이중 선 차트)

#### 2.4 TOP 10 테이블
```python
col1, col2 = st.columns(2)

with col1:
    st.subheader("🔴 가장 혼잡한 역 TOP 10")
    st.dataframe(top_congested_stations)

with col2:
    st.subheader("🟢 가장 여유로운 역 TOP 10")
    st.dataframe(least_congested_stations)
```

#### 2.5 사이드바 필터
```python
with st.sidebar:
    st.header("🔍 필터")
    
    day_type = st.radio(
        "요일 선택",
        ["평일", "휴일", "전체"]
    )
    
    time_range = st.slider(
        "시간대 범위",
        min_value=5,
        max_value=24,
        value=(7, 20)
    )
    
    selected_lines = st.multiselect(
        "호선 선택",
        ["1호선", "2호선", "3호선", "4호선", "5호선", "6호선", "7호선", "8호선"],
        default=["1호선", "2호선"]
    )
```

### 산출물
- ✅ `app.py` (메인 홈페이지)
- ✅ 기본 차트 3개
- ✅ 메트릭 카드 4개
- ✅ TOP 10 테이블

---

## **Phase 3: 역별 상세 분석 페이지** ✅ (완료)

### 목표
특정 역의 상세 혼잡도 분석 페이지

### 작업 내용

#### 3.1 역 선택 인터페이스
**파일: `pages/2_🔍_역별_분석.py`**

```python
st.title("🔍 역별 상세 분석")

# 사이드바에서 역 선택
with st.sidebar:
    selected_line = st.selectbox(
        "호선 선택",
        ["1호선", "2호선", "3호선", ...]
    )
    
    # 선택된 호선의 역 목록
    stations = get_stations_by_line(selected_line)
    selected_station = st.selectbox("역 선택", stations)
    
    direction = st.radio("방향", ["상행", "하행", "전체"])
    day_type = st.radio("요일", ["평일", "휴일", "비교"])
```

#### 3.2 역 정보 카드
```python
col1, col2, col3 = st.columns(3)

with col1:
    st.metric("평균 혼잡도", "52.3%")
with col2:
    st.metric("피크 시간", "오전 8:30")
with col3:
    st.metric("피크 혼잡도", "97.5%")
```

#### 3.3 시각화
1. **시간대별 혼잡도 선 그래프**
   - X축: 시간대 (5:30 ~ 24:30)
   - Y축: 혼잡도 (%)
   - 상행/하행 구분 색상

2. **평일 vs 휴일 비교**
   - 이중 선 그래프
   - 차이가 큰 구간 하이라이트

3. **히트맵**
   - X축: 시간대
   - Y축: 요일 (평일/휴일) 또는 방향 (상행/하행)
   - 색상: 혼잡도 (녹색→노랑→빨강)

4. **방향별 비교 막대 차트**

#### 3.4 인사이트 자동 생성
```python
st.info(f"""
💡 **인사이트**
- 이 역은 {peak_time}에 가장 혼잡합니다 ({peak_congestion}%)
- 평일이 주말보다 평균 {diff}% 더 혼잡합니다
- 가장 여유로운 시간대는 {best_time}입니다
""")
```

### 산출물
- ✅ `pages/2_🔍_역별_분석.py`
- ✅ 시간대별 선 그래프
- ✅ 히트맵
- ✅ 인사이트 카드

### Phase 3 완료 항목
- [x] 역 선택 인터페이스 (호선 → 역)
- [x] 방향/요일 필터 (전체/상행/하행/내선/외선, 평일/토요일/일요일)
- [x] 역 정보 메트릭 카드 3개 (평균 혼잡도, 피크 시간, 여유 시간)
- [x] 방향별 시간대 혼잡도 선 그래프
- [x] 방향별 평균 막대 차트
- [x] 요일별 혼잡도 비교 차트
- [x] 시간대별 혼잡도 히트맵 (방향/요일 기준 선택 가능)
- [x] 자동 인사이트 생성 (5가지 인사이트)
- [x] 원본 데이터 미리보기
- [x] 에러 핸들링 및 로딩 스피너

---

## **Phase 4: 시간대별 분석 페이지** (1일)

### 목표
시간대 중심의 혼잡도 분석

### 작업 내용

#### 4.1 시간대 선택 인터페이스
**파일: `pages/3_📈_시간대_분석.py`**

```python
st.title("📈 시간대별 혼잡도 분석")

# 시간대 선택
time_slots = ["05:30", "06:00", "06:30", ..., "00:30"]
selected_time = st.select_slider(
    "시간대 선택",
    options=time_slots,
    value="08:00"
)

# 또는 시간대 범위
time_range = st.slider(
    "시간대 범위",
    min_value=0,
    max_value=len(time_slots)-1,
    value=(14, 16)
)
```

#### 4.2 시각화
1. **선택한 시간대의 전체 노선 혼잡도**
   - 막대 차트 (역별)
   - 색상으로 혼잡도 구분

2. **가장 혼잡한 역 TOP 20**
   - 해당 시간대 기준
   - 정렬 가능한 테이블

3. **시간대 비교**
   - 2개 시간대 선택하여 비교
   - Side-by-side 막대 차트

4. **출퇴근 시간대 패턴**
   - 오전 피크 (7:00-9:00)
   - 오후 피크 (17:00-19:00)
   - 패턴 시각화

### 산출물
- ✅ `pages/3_📈_시간대_분석.py`
- ✅ 시간대별 막대 차트
- ✅ TOP 20 테이블
- ✅ 비교 기능

### Phase 4 완료 항목
- [x] 시간대 선택 인터페이스 (슬라이더, selectbox)
- [x] 단일 시간대 분석 모드
  - [x] 메트릭 카드 4개 (평균 혼잡도, 최고 혼잡도, 최저 혼잡도, 혼잡한 역 수)
  - [x] 혼잡한 역 TOP N 막대 차트
  - [x] 여유로운 역 TOP N 막대 차트
  - [x] 전체 시간대 추이 차트 (선택 시간 하이라이트)
- [x] 시간대 비교 모드
  - [x] 2개 시간대 선택 UI
  - [x] 비교 메트릭 카드
  - [x] 그룹 막대 차트 (side-by-side)
  - [x] 상세 비교 테이블 (정렬 옵션 포함)
- [x] 출퇴근 패턴 분석 모드
  - [x] 오전/오후 피크 정보 카드
  - [x] 하루 전체 패턴 차트 (피크 구간 하이라이트)
  - [x] 오전/오후 피크 상세 분석 (TOP 10 역)
- [x] 필터 (요일 구분)
- [x] 자동 인사이트 생성
- [x] 사용 가이드 (expander)
- [x] data_processor.py에 시간대 분석 함수 6개 추가
- [x] visualization.py에 시간대 분석 차트 함수 4개 추가

---

## **Phase 5: 추천 및 인사이트 페이지** (1-2일)

### 목표
사용자에게 실용적인 정보 제공

### 작업 내용

#### 5.1 사용자 입력
**파일: `pages/4_💡_추천.py`**

```python
st.title("💡 맞춤 추천")

col1, col2 = st.columns(2)

with col1:
    start_station = st.selectbox(
        "출발역",
        all_stations,
        help="출발하실 역을 선택하세요"
    )

with col2:
    end_station = st.selectbox(
        "도착역",
        all_stations,
        help="도착하실 역을 선택하세요"
    )

departure_time = st.time_input(
    "출발 희망 시간",
    value=datetime.time(8, 0)
)
```

#### 5.2 추천 알고리즘
**파일: `utils/recommendation.py`**

```python
def recommend_best_time(start, end, day_type):
    """최적 출발 시간 추천"""
    # 해당 구간의 시간대별 혼잡도 계산
    # 혼잡도가 낮은 시간대 추출
    # 사용자 선호도 반영
    return best_times

def avoid_congestion(station, time, threshold=70):
    """혼잡 회피 시간대 제안"""
    # 임계값 이하의 시간대 찾기
    return recommended_times
```

#### 5.3 추천 결과 표시
```python
st.success("🎯 **추천 출발 시간**")

col1, col2, col3 = st.columns(3)

with col1:
    st.metric(
        "최고의 시간",
        "오전 10:30",
        delta="혼잡도 32%",
        delta_color="inverse"
    )

with col2:
    st.metric(
        "괜찮은 시간",
        "오전 6:30",
        delta="혼잡도 45%",
        delta_color="inverse"
    )

with col3:
    st.metric(
        "피해야 할 시간",
        "오전 8:30",
        delta="혼잡도 95%",
        delta_color="normal"
    )
```

#### 5.4 시각화
- 출발역과 도착역의 혼잡도 비교
- 시간대별 추천 점수 차트
- 색상 코드 (🟢 추천, 🟡 보통, 🔴 비추천)

#### 5.5 인사이트 제공
```python
st.info("""
💡 **인사이트**
- 선택하신 시간보다 30분 늦게 출발하시면 40% 더 쾌적합니다
- 상행선이 하행선보다 평균 25% 덜 혼잡합니다
- 이 구간은 오전 10시 이후 급격히 여유로워집니다
""")
```

### 산출물
- ✅ `pages/4_💡_추천.py`
- ✅ `utils/recommendation.py`
- ✅ 추천 알고리즘
- ✅ 시각화

---

## **Phase 6: 고급 시각화 및 UX 개선** (1-2일)

### 목표
차트 품질 향상 및 사용자 경험 개선

### 작업 내용

#### 6.1 Plotly 인터랙티브 차트
**파일: `utils/visualization.py`**

```python
import plotly.express as px
import plotly.graph_objects as go

def create_time_series_chart(df, title):
    """시계열 차트 생성"""
    fig = px.line(
        df,
        x='시간대',
        y='혼잡도',
        color='방향',
        title=title,
        labels={'혼잡도': '혼잡도 (%)'},
        hover_data=['역명', '호선']
    )
    
    fig.update_layout(
        hovermode='x unified',
        template='plotly_white',
        height=400
    )
    
    return fig

def create_heatmap(data, x_labels, y_labels):
    """히트맵 생성"""
    fig = px.imshow(
        data,
        labels=dict(x="시간대", y="역", color="혼잡도"),
        x=x_labels,
        y=y_labels,
        color_continuous_scale="RdYlGn_r",  # 빨강→노랑→초록 (역순)
        aspect="auto"
    )
    
    fig.update_layout(
        title="시간대별 혼잡도 히트맵",
        height=600
    )
    
    return fig

def create_bar_chart_with_colors(df, threshold_yellow=50, threshold_red=70):
    """혼잡도에 따라 색상이 변하는 막대 차트"""
    colors = ['green' if x < threshold_yellow else 
              'yellow' if x < threshold_red else 
              'red' for x in df['혼잡도']]
    
    fig = go.Figure(data=[
        go.Bar(
            x=df['역명'],
            y=df['혼잡도'],
            marker_color=colors,
            text=df['혼잡도'],
            texttemplate='%{text:.1f}%'
        )
    ])
    
    return fig
```

#### 6.2 로딩 및 에러 처리
```python
# 로딩 스피너
with st.spinner('데이터를 불러오는 중...'):
    data = load_data()

# 에러 핸들링
try:
    process_data()
except Exception as e:
    st.error(f"오류가 발생했습니다: {str(e)}")
    st.info("페이지를 새로고침하거나 관리자에게 문의하세요.")

# 빈 데이터 처리
if df.empty:
    st.warning("선택한 조건에 해당하는 데이터가 없습니다.")
else:
    st.dataframe(df)
```

#### 6.3 캐싱 최적화
```python
@st.cache_data(ttl=3600)  # 1시간 캐시
def load_processed_data():
    """전처리된 데이터 로드"""
    return pd.read_pickle('data/processed/subway_congestion.pkl')

@st.cache_data
def calculate_statistics(df):
    """통계 계산 (캐싱)"""
    return {
        'mean': df['혼잡도'].mean(),
        'max': df['혼잡도'].max(),
        'peak_time': df.loc[df['혼잡도'].idxmax(), '시간대']
    }
```

#### 6.4 커스텀 테마 설정
**파일: `.streamlit/config.toml`**

```toml
[theme]
primaryColor = "#FF4B4B"
backgroundColor = "#FFFFFF"
secondaryBackgroundColor = "#F0F2F6"
textColor = "#262730"
font = "sans serif"

[server]
maxUploadSize = 200
```

#### 6.5 UI/UX 개선
```python
# 도움말 툴팁
st.help("이 차트는 시간대별 평균 혼잡도를 나타냅니다.")

# 확장 가능한 섹션
with st.expander("📖 혼잡도 기준 안내"):
    st.markdown("""
    - 🟢 **여유** (0-50%): 앉아서 이동 가능
    - 🟡 **보통** (50-70%): 서서 이동 가능
    - 🔴 **혼잡** (70-100%): 매우 혼잡
    """)

# 진행 상황 표시
progress_bar = st.progress(0)
for i in range(100):
    progress_bar.progress(i + 1)
```

### 산출물
- ✅ `utils/visualization.py`
- ✅ `.streamlit/config.toml`
- ✅ 개선된 모든 차트
- ✅ 에러 핸들링

---

## **Phase 7: 추가 기능 (선택사항)** (1-2일)

### 작업 내용

#### 7.1 데이터 다운로드
```python
# CSV 다운로드
csv = df.to_csv(index=False).encode('utf-8-sig')
st.download_button(
    label="📥 CSV 다운로드",
    data=csv,
    file_name=f"congestion_data_{datetime.now().strftime('%Y%m%d')}.csv",
    mime="text/csv"
)

# Excel 다운로드
buffer = io.BytesIO()
with pd.ExcelWriter(buffer, engine='openpyxl') as writer:
    df.to_excel(writer, index=False)
st.download_button(
    label="📥 Excel 다운로드",
    data=buffer,
    file_name="congestion_data.xlsx",
    mime="application/vnd.ms-excel"
)
```

#### 7.2 다중 역 비교
```python
selected_stations = st.multiselect(
    "비교할 역 선택 (최대 5개)",
    all_stations,
    max_selections=5
)

if len(selected_stations) >= 2:
    comparison_df = compare_stations(selected_stations)
    fig = create_comparison_chart(comparison_df)
    st.plotly_chart(fig)
```

#### 7.3 통계 분석
```python
st.subheader("📊 통계 분석")

tab1, tab2, tab3 = st.tabs(["기술 통계", "상관관계", "트렌드"])

with tab1:
    st.dataframe(df.describe())

with tab2:
    correlation = calculate_correlation()
    fig = px.imshow(correlation, text_auto=True)
    st.plotly_chart(fig)

with tab3:
    trend = calculate_trend()
    st.line_chart(trend)
```

#### 7.4 즐겨찾기 기능 (세션 스테이트)
```python
# 세션 스테이트 초기화
if 'favorites' not in st.session_state:
    st.session_state.favorites = []

# 즐겨찾기 추가
if st.button("⭐ 즐겨찾기 추가"):
    if selected_station not in st.session_state.favorites:
        st.session_state.favorites.append(selected_station)
        st.success(f"{selected_station}을(를) 즐겨찾기에 추가했습니다!")

# 즐겨찾기 목록 표시
if st.session_state.favorites:
    st.sidebar.markdown("### ⭐ 즐겨찾기")
    for fav in st.session_state.favorites:
        col1, col2 = st.sidebar.columns([3, 1])
        col1.write(fav)
        if col2.button("❌", key=f"remove_{fav}"):
            st.session_state.favorites.remove(fav)
            st.rerun()
```

### 산출물
- ✅ 다운로드 기능
- ✅ 비교 기능
- ✅ 통계 분석
- ✅ 즐겨찾기

---

## **Phase 8: 테스트 및 배포** (1일)

### 작업 내용

#### 8.1 로컬 테스트
```bash
# 앱 실행
streamlit run app.py

# 특정 페이지 테스트
streamlit run pages/2_🔍_역별_분석.py
```

#### 8.2 요구사항 파일 정리
**파일: `requirements.txt`**

```txt
streamlit==1.31.0
pandas==2.2.0
plotly==5.18.0
numpy==1.26.3
openpyxl==3.1.2
```

#### 8.3 README 작성
**파일: `README.md`**

```markdown
# 🚇 서울 지하철 혼잡도 대시보드

서울교통공사 지하철 혼잡도 데이터를 시각화한 인터랙티브 대시보드입니다.

## 기능
- 실시간 혼잡도 현황
- 역별 상세 분석
- 시간대별 분석
- 맞춤 추천

## 설치 및 실행
\`\`\`bash
pip install -r requirements.txt
streamlit run app.py
\`\`\`

## 사용 방법
1. 사이드바에서 필터 선택
2. 원하는 페이지로 이동
3. 차트와 데이터 확인
```

#### 8.4 Streamlit Cloud 배포
1. **GitHub에 코드 푸시**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/username/subway-dashboard.git
   git push -u origin main
   ```

2. **Streamlit Cloud 설정**
   - https://share.streamlit.io 접속
   - GitHub 연동
   - 레포지토리 선택
   - 메인 파일: `app.py`
   - Python 버전: 3.11
   - Deploy 클릭

3. **환경 변수 설정** (필요시)
   - Secrets 탭에서 설정

#### 8.5 최종 점검 체크리스트
- [ ] 모든 페이지가 정상 작동하는가?
- [ ] 데이터가 올바르게 표시되는가?
- [ ] 필터가 정상 작동하는가?
- [ ] 차트가 인터랙티브한가?
- [ ] 모바일에서도 잘 보이는가?
- [ ] 로딩 시간이 적절한가?
- [ ] 에러 핸들링이 잘 되어있는가?
- [ ] README가 명확한가?

### 산출물
- ✅ 배포된 앱 URL
- ✅ README.md
- ✅ 테스트 완료

---

## 📅 전체 일정 요약

| Phase | 작업 내용 | 예상 기간 | 난이도 | 상태 |
|-------|----------|----------|--------|------|
| 1 | 환경 설정 및 데이터 준비 | 1일 | ⭐⭐ | ✅ 완료 |
| 2 | 메인 대시보드 | 1-2일 | ⭐⭐ | ✅ 완료 |
| 3 | 역별 분석 페이지 | 1-2일 | ⭐⭐⭐ | ✅ 완료 |
| 4 | 시간대 분석 페이지 | 1일 | ⭐⭐ | ✅ 완료 |
| 5 | 추천 기능 | 1-2일 | ⭐⭐⭐ | 🔜 예정 |
| 6 | UX 개선 | 1-2일 | ⭐⭐ | 🔜 예정 |
| 7 | 추가 기능 (선택) | 1-2일 | ⭐⭐ | 🔜 예정 |
| 8 | 테스트 및 배포 | 1일 | ⭐ | 🔜 예정 |

**총 예상 기간**: 8-12일

---

## 🎯 MVP (최소 기능 제품) - 3-4일

빠르게 구현하고 싶다면:

### Week 1: MVP
- **Day 1**: Phase 1 (데이터 준비)
- **Day 2**: Phase 2 (메인 대시보드 - 기본 기능만)
- **Day 3**: Phase 3 (역별 분석 - 기본 차트만)
- **Day 4**: Phase 8 (배포)

### Week 2: 개선
- **Day 5-7**: Phase 4, 5 (추가 분석 및 추천)
- **Day 8-10**: Phase 6, 7 (UX 개선 및 추가 기능)

---

## 💡 개발 팁

### 1. 데이터 캐싱 활용
```python
@st.cache_data
def expensive_computation():
    # 무거운 연산은 캐싱
    pass
```

### 2. 세션 스테이트 활용
```python
if 'key' not in st.session_state:
    st.session_state.key = initial_value
```

### 3. 성능 최적화
- 큰 데이터는 피클 파일로 저장
- 필터링은 최소한으로
- 차트는 필요할 때만 그리기

### 4. 디버깅
```python
# 개발 중에만 표시
if st.checkbox("디버그 모드"):
    st.write(df.head())
    st.write(df.dtypes)
```

---

## 🚨 주의사항

1. **인코딩 문제**
   - CSV 파일이 CP949 또는 UTF-8 BOM으로 인코딩되어 있을 수 있음
   - `encoding='cp949'` 또는 `encoding='utf-8-sig'` 시도

2. **데이터 크기**
   - 전체 데이터를 한 번에 로드하면 느려질 수 있음
   - 필요한 부분만 필터링하여 사용

3. **메모리 관리**
   - 캐싱을 적절히 사용하여 메모리 효율화
   - 불필요한 데이터는 삭제

4. **배포 시 파일 경로**
   - 상대 경로 사용 (`./data/...`)
   - OS 독립적인 경로 사용 (`os.path.join()`)

---

## 📚 참고 자료

### Streamlit 공식 문서
- https://docs.streamlit.io

### Plotly 차트 예제
- https://plotly.com/python/

### Pandas 문서
- https://pandas.pydata.org/docs/

### 유용한 Streamlit 컴포넌트
- streamlit-aggrid: 고급 테이블
- streamlit-option-menu: 네비게이션 메뉴
- plotly-express: 간편한 차트

---

## ✅ 완료 후 체크리스트

### Phase 1 완료 항목
- [x] 프로젝트 구조 생성
- [x] 데이터 전처리 파이프라인 구축
- [x] utils 모듈 구현
- [x] 기본 Streamlit 앱 생성
- [x] requirements.txt 작성
- [x] GitHub 커밋 및 푸시

### Phase 2 완료 항목
- [x] app.py 메인 대시보드 UI 구현
- [x] 메트릭 카드 4개 (평균 혼잡도, 피크 시간대, 분석 역 수, 여유 시간대)
- [x] 호선별 평균 혼잡도 막대 차트
- [x] 시간대별 혼잡도 추이 선 차트
- [x] 요일별(평일/토/일) 비교 차트
- [x] TOP 10 혼잡한 역 / 여유로운 역 테이블
- [x] 사이드바 필터 (요일, 시간대, 호선)
- [x] utils/visualization.py 차트 생성 함수
- [x] utils/data_processor.py 집계/필터 함수
- [x] .streamlit/config.toml 테마 설정

### 전체 프로젝트
- [ ] 모든 Phase 완료
- [x] Phase 1-4 완료 ✅
- [x] 각 페이지 정상 작동 확인 (Phase 1-4)
- [ ] 문서화 완료
- [x] GitHub 업로드 (Phase 1-4)
- [ ] Streamlit Cloud 배포
- [ ] 모바일 테스트
- [ ] 사용자 피드백 수집

---

**문서 작성일**: 2025년 12월 16일  
**프로젝트 시작일**: 2025년 12월 16일  
**Phase 1 완료일**: 2025년 12월 16일  
**Phase 2 완료일**: 2025년 12월 16일  
**Phase 3 완료일**: 2025년 12월 16일  
**Phase 4 완료일**: 2025년 12월 16일  
**예상 완료일**: TBD

---

## 📞 문의 및 지원

프로젝트 진행 중 문제가 발생하면:
1. Streamlit 공식 문서 확인
2. GitHub Issues 활용
3. Streamlit Community Forum 질문

**행운을 빕니다! 🚀**

